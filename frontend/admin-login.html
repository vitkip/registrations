<!DOCTYPE html>
<html lang="lo">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>เปเบเบปเปเบฒเบชเบนเปเบฅเบฐเบเบปเบ Admin - Certificate Registration System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="css/style.css">
    <link rel="shortcut icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>๐</text></svg>">
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <div class="flex items-center justify-center min-h-screen px-4">
        <div class="max-w-md w-full">
            <!-- Header -->
            <div class="text-center mb-8">
                <div class="inline-flex items-center justify-center w-16 h-16 bg-blue-600 rounded-full mb-4">
                    <span class="text-2xl">๐</span>
                </div>
                <h1 class="text-3xl font-bold text-gray-800 lao-text">เปเบเบปเปเบฒเบชเบนเปเบฅเบฐเบเบปเบ Admin</h1>
                <p class="text-gray-600 mt-2 lao-text">เบฅเบฐเบเบปเบเบเบฑเบเบเบฒเบเบฅเบปเบเบเบฐเบเบฝเบเบฎเบฑเบเปเบเบเบฐเบเบฒเบเบเบดเบเบฐเบเบฑเบ</p>
            </div>

            <!-- Alerts Container -->
            <div id="alerts-container" class="mb-6"></div>

            <!-- Login Form -->
            <div class="card">
                <div class="card-body">
                    <form id="admin-login-form">
                        <div class="form-group">
                            <label class="form-label lao-text">เบเบทเปเบเบนเปเปเบเปเบซเบผเบทเบญเบตเปเบกเบฅ</label>
                            <input type="text" name="username" class="form-input" placeholder="admin" required>
                            <div class="form-error"></div>
                        </div>

                        <div class="form-group">
                            <label class="form-label lao-text">เบฅเบฐเบซเบฑเบเบเปเบฒเบ</label>
                            <input type="password" name="password" class="form-input" placeholder="โขโขโขโขโขโขโขโข" required>
                            <div class="form-error"></div>
                        </div>

                        <div class="form-group">
                            <button type="submit" class="btn-primary w-full text-lg py-3">
                                ๐ เปเบเบปเปเบฒเบชเบนเปเบฅเบฐเบเบปเบ
                            </button>
                        </div>

                        <div class="text-center mt-4">
                            <a href="index.html" class="text-blue-600 hover:text-blue-800 text-sm lao-text">
                                โ เบเบฑเบเปเบเปเปเบฒเบซเบผเบฑเบ
                            </a>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Test Accounts Info -->
            <div class="card mt-6">
                <div class="card-body">
                    <h3 class="font-semibold text-gray-800 mb-3 lao-text">เบเบฑเบเบเบตเบเบปเบเบชเบญเบ:</h3>
                    <div class="space-y-2 text-sm">
                        <div class="p-3 bg-gray-50 rounded-lg">
                            <strong>Admin:</strong> admin / password123
                        </div>
                     
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/api.js"></script>
    <script>
        // Check if already logged in
        if (api.token) {
            window.location.href = 'admin-dashboard.html';
        }

        // Login form submission
        document.getElementById('admin-login-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            if (!UIUtils.validateForm('admin-login-form')) {
                return;
            }

            const submitBtn = e.target.querySelector('button[type="submit"]');
            const hideLoading = UIUtils.showLoading(submitBtn);

            try {
                const formData = new FormData(e.target);
                const username = formData.get('username');
                const password = formData.get('password');

                const result = await api.login(username, password);

                if (result.success) {
                    // Store token and user info
                    api.setToken(result.token);
                    localStorage.setItem('user_info', JSON.stringify(result.user));
                    
                    UIUtils.showAlert('เปเบเบปเปเบฒเบชเบนเปเบฅเบฐเบเบปเบเบชเบณเปเบฅเบฑเบ! เบเบณเบฅเบฑเบเปเบญเบ...', 'success');
                    
                    // Redirect to dashboard
                    setTimeout(() => {
                        window.location.href = 'admin-dashboard.html';
                    }, 1000);
                } else {
                    UIUtils.showAlert(result.message || 'เบเบทเปเบเบนเปเปเบเปเบซเบผเบทเบฅเบฐเบซเบฑเบเบเปเบฒเบเบเปเปเบเบทเบเบเปเบญเบ', 'error');
                }
            } catch (error) {
                console.error('Login error:', error);
                UIUtils.showAlert('เปเบเบตเบเบเปเปเบเบดเบเบเบฒเบเปเบเบเบฒเบเปเบเบทเปเบญเบกเบเปเปเบฅเบฐเบเบปเบ', 'error');
            } finally {
                hideLoading();
            }
        });

        // Handle Enter key
        document.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                document.getElementById('admin-login-form').dispatchEvent(new Event('submit'));
            }
        });
    </script>
</body>
</html>